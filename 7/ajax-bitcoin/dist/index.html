
<!DOCTYPE html>
<html lang="es-MX" >
<head>
  <meta charset="UTF-8">
  <title>AJAX Bitcoin</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">  
  <meta name="description" content="AJAX Bitcoin">
  <meta property="og:title" content="AJAX Bitcoin">
  <meta property="og:description" content="AJAX Bitcoin">
  <meta property="og:url" content="">
  <meta property="og:image" content="./image.webp"> 
  <meta name="keywords" content="AJAX Bitcoin">
  <meta name="author" content="@luisangelmaciel lamacpad@gmail.com">
  <link rel=" shortcut icon" href="https://xbrpw.github.io/2023/favicon.svg" type="image/x-icon">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="stylesheet" href="./style.css">
</head>

<!-- AJAX Bitcoin  -->
<h1>Bitcoin Current Price is: <span id="price" style="  color: green;"></span></h1>
<p>by <a href="https://www.coindesk.com/" aria-label="Coin desk API">  api.coindesk.com</a></p>
<button>Refresh Data</button>

<script>
  var btn = document.querySelector("button");
  var priceDisp = document.querySelector("#price");

  var currency = "USD";

  btn.addEventListener("click", function(){
    var XHR = new XMLHttpRequest();
    
    XHR.onreadystatechange = function() {
      if(XHR.readyState == 4 && XHR.status == 200) {
        var data = JSON.parse(XHR.responseText);
        var price = data.bpi.USD.rate;
        priceDisp.innerText = price + " " + currency;
      }
    }
    
    var url = "https://api.coindesk.com/v2/bpi/currentprice.json";
    XHR.open("GET", url);
    XHR.send();
  })    
</script>
</body>
</html>
