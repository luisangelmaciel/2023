const openGiftBtn = document.getElementById('gift-open'); let couponCode = ['Descuento 1', 'Descuento 2', 'Descuento 3']; function getRandomCode(array) { return array[Math.floor((Math.random()*array.length))]; } getRandomCode(couponCode); openGiftBtn.addEventListener('click', async() => { let disabledGifts = document.querySelectorAll('.disabled'); disabledGifts.forEach((gift) => gift.classList.remove('disabled')); randomSelect(); setTimeout(() => { hideGift(); let openGift = document.querySelector('.gift-selected'); openGift.classList.add('openable'); openGift.addEventListener('click', () => { swal({ title: 'Â¡Felicidades!', text: `Tu descuento es del ${getRandomCode(couponCode)}`, }) }) }, 3400); openGiftBtn.setAttribute('disabled', ''); }) function randomSelect (){ const times = 30; const interval = setInterval(() => { const randomGift = pickRandomGift(); selectedGift(randomGift); setTimeout(() => { deselectedGift(randomGift); }, 100) }, 100) setTimeout(() => { clearInterval(interval); setTimeout(() => { const randomGift = pickRandomGift() selectedGift(randomGift); }, 100) }, times * 100) } function pickRandomGift(){ const gifts = document.querySelectorAll('.fa-gifts'); return gifts[Math.floor(Math.random() * gifts.length)] } function selectedGift (gift) { gift.classList.add('gift-selected') } function deselectedGift (gift) { gift.classList.remove('gift-selected') } function hideGift(){ const gifts = document.querySelectorAll('.fa-gifts'); let arrayGifts = Array.from(gifts); let unopenableGift = arrayGifts.filter((gift) => !gift.classList.contains('gift-selected')); unopenableGift.map((gift) => gift.setAttribute('id', 'delete')); const deleteGifts = document.querySelectorAll('#delete'); deleteGifts.forEach(deleteGift => { deleteGift.remove(); }); }